<!-- 
  Quick Auth Debug Script - Copy & Paste into Browser Console or Add to HTML
  Code with Morais - Authentication Debug Utility
  
  USAGE:
  1. Copy the entire script block below and paste into browser console
  2. Or add this script tag to any HTML page for persistent debugging
  3. Or load the auth-debug.js file directly
-->

<script>
/**
 * Quick Auth Debug Function - Standalone Version
 * Use this in the browser console to debug authentication state
 */
window.debugAuth = function() {
    console.log('=== üîê Auth Debug Info ===');
    console.log('Timestamp:', new Date().toISOString());
    
    // Basic storage check
    const localToken = localStorage.getItem('auth_token');
    const sessionToken = sessionStorage.getItem('auth_token');
    
    console.log('üì± LocalStorage auth_token:', localToken ? `Present (${localToken.length} chars)` : 'null');
    console.log('üíæ SessionStorage auth_token:', sessionToken ? `Present (${sessionToken.length} chars)` : 'null');
    
    // AuthService check
    if (window.authService) {
        console.log('üîß AuthService:');
        console.log('  - Token:', window.authService.token ? 'Present' : 'null');
        console.log('  - Current User:', window.authService.currentUser);
        console.log('  - Is Authenticated:', window.authService.isAuthenticated());
        console.log('  - Is Initialized:', window.authService.initialized);
    } else {
        console.log('‚ùå AuthService not available');
    }
    
    // AuthManager check
    if (window.authManager) {
        console.log('üõ†Ô∏è AuthManager:');
        console.log('  - Current User:', window.authManager.getCurrentUser());
        console.log('  - Is Authenticated:', window.authManager.isUserAuthenticated());
        console.log('  - Is Initialized:', window.authManager.initialized);
    } else {
        console.log('‚ùå AuthManager not available');
    }
    
    // Global users
    console.log('üåê Global Users:');
    console.log('  - globalThis.currentUser:', globalThis.currentUser);
    console.log('  - window.currentUser:', window.currentUser);
    
    // Quick test
    const hasAuth = !!(localToken || sessionToken || 
                      (window.authService && window.authService.isAuthenticated()) ||
                      (window.authManager && window.authManager.isUserAuthenticated()));
    
    console.log('üîç Quick Status:', hasAuth ? '‚úÖ AUTHENTICATED' : '‚ùå NOT AUTHENTICATED');
    console.log('=== End Auth Debug ===');
    
    return {
        authenticated: hasAuth,
        authService: window.authService || null,
        authManager: window.authManager || null,
        tokens: {
            localStorage: !!localToken,
            sessionStorage: !!sessionToken
        },
        users: {
            globalThis: globalThis.currentUser || null,
            window: window.currentUser || null
        }
    };
};

// Make it available globally
globalThis.debugAuth = window.debugAuth;

// Quick status check
window.quickAuthCheck = function() {
    const status = window.debugAuth();
    return status.authenticated;
};

console.log('üîß Auth debug function loaded. Run debugAuth() to check authentication state.');
</script>

<!-- 
  CONSOLE USAGE:
  1. Open browser console (F12)
  2. Paste the script above or just the debugAuth function
  3. Run: debugAuth()
  
  EXAMPLE OUTPUT:
  debugAuth() will show:
  - Token presence in storage
  - AuthService state
  - AuthManager state  
  - Global user objects
  - Overall authentication status
-->

<!-- 
  QUICK COPY-PASTE VERSION FOR CONSOLE:
  
  window.debugAuth = function() {
      console.log('=== Auth Debug ===');
      console.log('Token in localStorage:', localStorage.getItem('auth_token'));
      console.log('Token in authService:', window.authService ? window.authService.token : 'AuthService not available');
      console.log('Current User:', window.authService ? window.authService.currentUser : 'AuthService not available');
      console.log('Is Authenticated:', window.authService ? window.authService.isAuthenticated() : 'AuthService not available');
      console.log('Is Initialized:', window.authService ? window.authService.initialized : 'AuthService not available');
      return window.authService || 'AuthService not available';
  };
  
  debugAuth();
-->
