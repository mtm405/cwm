{# Modal Macros - Reusable modal creation functions #}

{# Base Modal Macro
Usage: {{ modals.base_modal(
    id='my-modal', 
    title='Modal Title', 
    content='<p>Modal content</p>',
    size='md',
    footer_buttons=[
        {'text': 'Cancel', 'class': 'btn-secondary', 'action': 'closeModal'},
        {'text': 'Save', 'class': 'btn-primary', 'action': 'saveData'}
    ]
) }}
#}
{% macro base_modal(id, title, content, size='md', footer_buttons=[], backdrop_close=true) %}
<div id="{{ id }}" class="modal-overlay modal-{{ size }}" style="display: none;">
    <div class="modal-backdrop" {% if backdrop_close %}onclick="closeModal('{{ id }}')"{% endif %}></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">{{ title }}</h3>
            <button class="modal-close" onclick="closeModal('{{ id }}')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            {{ content | safe }}
        </div>
        {% if footer_buttons %}
        <div class="modal-footer">
            {% for button in footer_buttons %}
            <button class="btn {{ button.class }}" onclick="{{ button.action }}('{{ id }}')">
                {{ button.text }}
            </button>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
{% endmacro %}

{# Confirmation Modal Macro
Usage: {{ modals.confirm_modal(
    id='delete-confirm',
    title='Delete Item?',
    message='This action cannot be undone.',
    confirm_action='deleteItem',
    confirm_text='Delete',
    variant='danger'
) }}
#}
{% macro confirm_modal(id, title, message, confirm_action, confirm_text='Confirm', cancel_text='Cancel', variant='danger') %}
<div id="{{ id }}" class="modal-overlay modal-sm" style="display: none;">
    <div class="modal-backdrop" onclick="closeModal('{{ id }}')"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">{{ title }}</h3>
            <button class="modal-close" onclick="closeModal('{{ id }}')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p class="confirm-message">{{ message }}</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal('{{ id }}')">
                {{ cancel_text }}
            </button>
            <button class="btn btn-{{ variant }}" onclick="{{ confirm_action }}(); closeModal('{{ id }}')">
                {{ confirm_text }}
            </button>
        </div>
    </div>
</div>
{% endmacro %}

{# Info Modal Macro
Usage: {{ modals.info_modal(
    id='info-modal',
    title='About XP System',
    icon='fas fa-star',
    description='Learn how our XP system works...',
    tips=['Complete lessons to earn XP', 'Maintain streaks for bonuses']
) }}
#}
{% macro info_modal(id, title, description, icon='', tips=[], sections=[]) %}
<div id="{{ id }}" class="modal-overlay" style="display: none;">
    <div class="modal-backdrop" onclick="closeModal('{{ id }}')"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">
                {% if icon %}<i class="{{ icon }}"></i>{% endif %}
                {{ title }}
            </h3>
            <button class="modal-close" onclick="closeModal('{{ id }}')">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p class="modal-description">{{ description }}</p>
            
            {% if sections %}
            {% for section in sections %}
            <div class="modal-section">
                <h4>{{ section.title }}</h4>
                <div class="section-content">{{ section.content | safe }}</div>
            </div>
            {% endfor %}
            {% endif %}
            
            {% if tips %}
            <div class="modal-section">
                <h4><i class="fas fa-lightbulb"></i> Pro Tips:</h4>
                <ul class="modal-tips">
                    {% for tip in tips %}
                    <li><i class="fas fa-check"></i> {{ tip }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" onclick="closeModal('{{ id }}')">
                Got it!
            </button>
        </div>
    </div>
</div>
{% endmacro %}

{# Loading Modal Macro
Usage: {{ modals.loading_modal(
    id='loading-modal',
    title='Processing...',
    message='Please wait while we process your request.'
) }}
#}
{% macro loading_modal(id, title='Loading...', message='Please wait...', spinner_type='spinner') %}
<div id="{{ id }}" class="modal-overlay modal-sm" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">{{ title }}</h3>
        </div>
        <div class="modal-body text-center">
            <div class="loading-spinner">
                <i class="fas fa-{{ spinner_type }} fa-spin fa-2x"></i>
            </div>
            <p class="loading-message">{{ message }}</p>
        </div>
    </div>
</div>
{% endmacro %}
