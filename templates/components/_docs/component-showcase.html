<!-- Component Showcase Documentation Template -->
<!-- Interactive documentation and testing interface for all UI components -->

{% extends "base/layout.html" %}

{% block title %}Component Library - Code with Morais{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/documentation.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/components/prism-theme.css') }}">
{% endblock %}

{% block content %}
<div class="component-showcase-container">
    <!-- Documentation Header -->
    <header class="docs-header">
        <div class="container">
            <div class="docs-header-content">
                <div class="docs-title-section">
                    <h1 class="docs-title">
                        <i class="fas fa-puzzle-piece"></i>
                        Component Library
                    </h1>
                    <p class="docs-subtitle">
                        Interactive documentation and testing environment for all UI components
                    </p>
                </div>
                
                <div class="docs-stats">
                    <div class="stat-item">
                        <span class="stat-value">{{ component_stats.total_components }}</span>
                        <span class="stat-label">Components</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ component_stats.mobile_optimized_percentage }}%</span>
                        <span class="stat-label">Mobile Ready</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ component_stats.average_performance }}/10</span>
                        <span class="stat-label">Avg Performance</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">{{ component_stats.average_accessibility }}/10</span>
                        <span class="stat-label">Accessibility</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation and Filters -->
    <nav class="docs-navigation sticky-nav">
        <div class="container">
            <div class="nav-content">
                <!-- Search -->
                <div class="search-section">
                    <div class="search-input-group">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" 
                               id="component-search" 
                               class="search-input"
                               placeholder="Search components..."
                               aria-label="Search components">
                        <button class="search-clear" id="search-clear" aria-label="Clear search">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Filters -->
                <div class="filter-section">
                    <div class="filter-group">
                        <label for="type-filter" class="filter-label">Type:</label>
                        <select id="type-filter" class="filter-select">
                            <option value="">All Types</option>
                            <option value="layout">Layout</option>
                            <option value="navigation">Navigation</option>
                            <option value="form">Form</option>
                            <option value="display">Display</option>
                            <option value="interactive">Interactive</option>
                            <option value="gamification">Gamification</option>
                            <option value="lesson">Lesson</option>
                            <option value="dashboard">Dashboard</option>
                            <option value="mobile">Mobile</option>
                            <option value="utility">Utility</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-checkbox">
                            <input type="checkbox" id="mobile-filter">
                            <span class="checkmark"></span>
                            Mobile Optimized
                        </label>
                    </div>
                    
                    <div class="filter-group">
                        <label for="sort-filter" class="filter-label">Sort:</label>
                        <select id="sort-filter" class="filter-select">
                            <option value="name">Name (A-Z)</option>
                            <option value="performance">Performance</option>
                            <option value="accessibility">Accessibility</option>
                            <option value="usage">Usage Count</option>
                        </select>
                    </div>
                </div>
                
                <!-- View Toggle -->
                <div class="view-toggle-section">
                    <div class="view-toggle-group" role="group" aria-label="View mode">
                        <button class="view-toggle active" data-view="grid" aria-label="Grid view">
                            <i class="fas fa-th"></i>
                        </button>
                        <button class="view-toggle" data-view="list" aria-label="List view">
                            <i class="fas fa-list"></i>
                        </button>
                        <button class="view-toggle" data-view="detailed" aria-label="Detailed view">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="docs-main">
        <div class="container">
            <!-- Quick Start Guide -->
            <section class="quick-start-section" id="quick-start">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-rocket"></i>
                        Quick Start Guide
                    </h2>
                    <button class="section-toggle" data-target="quick-start-content">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
                
                <div class="section-content" id="quick-start-content">
                    <div class="quick-start-grid">
                        <div class="quick-start-card">
                            <div class="card-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <h3>Include Components</h3>
                            <p>Use Jinja2 include statements to add components to your templates</p>
                            <pre><code class="language-jinja2">{% set component_type = 'dashboard-stats' %}{% include 'components/common/skeleton-loader.html' %}</code></pre>
                        </div>
                        
                        <div class="quick-start-card">
                            <div class="card-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h3>Validate Props</h3>
                            <p>Use the component registry to validate properties before rendering</p>
                            <pre><code class="language-python">from utils.component_registry import validate_props
is_valid, errors = validate_props('skeleton_loader', props)</code></pre>
                        </div>
                        
                        <div class="quick-start-card">
                            <div class="card-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <h3>Mobile First</h3>
                            <p>All components are mobile-optimized with touch-friendly interactions</p>
                            <pre><code class="language-css">/* Mobile-first responsive design */
.component { touch-action: manipulation; }</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Component Library -->
            <section class="component-library-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-layer-group"></i>
                        Component Library
                    </h2>
                    <div class="section-actions">
                        <button class="btn btn-secondary" id="export-docs">
                            <i class="fas fa-download"></i>
                            Export Documentation
                        </button>
                        <button class="btn btn-primary" id="test-all-components">
                            <i class="fas fa-vial"></i>
                            Test All Components
                        </button>
                    </div>
                </div>
                
                <!-- Component Grid/List -->
                <div class="component-grid" id="component-grid">
                    {% for component in components %}
                    <article class="component-card" 
                             data-component="{{ component.name }}"
                             data-type="{{ component.component_type.value }}"
                             data-mobile="{{ component.mobile_optimized|lower }}"
                             data-performance="{{ component.performance_score }}"
                             data-accessibility="{{ component.accessibility_score }}">
                        
                        <!-- Component Header -->
                        <header class="component-header">
                            <div class="component-title-section">
                                <h3 class="component-title">{{ component.name }}</h3>
                                <div class="component-badges">
                                    <span class="badge badge-type">{{ component.component_type.value }}</span>
                                    {% if component.mobile_optimized %}
                                    <span class="badge badge-mobile">
                                        <i class="fas fa-mobile-alt"></i>
                                        Mobile
                                    </span>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="component-scores">
                                <div class="score-item" title="Performance Score">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <span>{{ component.performance_score }}/10</span>
                                </div>
                                <div class="score-item" title="Accessibility Score">
                                    <i class="fas fa-universal-access"></i>
                                    <span>{{ component.accessibility_score }}/10</span>
                                </div>
                            </div>
                        </header>
                        
                        <!-- Component Description -->
                        <div class="component-description">
                            <p>{{ component.description }}</p>
                        </div>
                        
                        <!-- Component Tags -->
                        <div class="component-tags">
                            {% for tag in component.tags %}
                            <span class="tag">{{ tag }}</span>
                            {% endfor %}
                        </div>
                        
                        <!-- Component Actions -->
                        <div class="component-actions">
                            <button class="btn btn-sm btn-secondary" 
                                    onclick="viewComponent('{{ component.name }}')">
                                <i class="fas fa-eye"></i>
                                View
                            </button>
                            <button class="btn btn-sm btn-primary" 
                                    onclick="testComponent('{{ component.name }}')">
                                <i class="fas fa-play"></i>
                                Test
                            </button>
                            <button class="btn btn-sm btn-outline" 
                                    onclick="copyExample('{{ component.name }}')">
                                <i class="fas fa-copy"></i>
                                Copy
                            </button>
                        </div>
                        
                        <!-- Expandable Details -->
                        <div class="component-details" id="details-{{ component.name }}">
                            <!-- Properties -->
                            {% if component.props %}
                            <div class="props-section">
                                <h4 class="props-title">
                                    <i class="fas fa-cog"></i>
                                    Properties
                                </h4>
                                <div class="props-grid">
                                    {% for prop in component.props %}
                                    <div class="prop-item">
                                        <div class="prop-header">
                                            <span class="prop-name">{{ prop.name }}</span>
                                            <span class="prop-type">{{ prop.prop_type.value }}</span>
                                            {% if prop.required %}
                                            <span class="prop-required">required</span>
                                            {% endif %}
                                        </div>
                                        <div class="prop-description">{{ prop.description }}</div>
                                        {% if prop.default is not none %}
                                        <div class="prop-default">Default: <code>{{ prop.default }}</code></div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- Dependencies -->
                            {% if component.css_dependencies or component.js_dependencies %}
                            <div class="dependencies-section">
                                <h4 class="dependencies-title">
                                    <i class="fas fa-link"></i>
                                    Dependencies
                                </h4>
                                {% if component.css_dependencies %}
                                <div class="dependency-group">
                                    <span class="dependency-label">CSS:</span>
                                    {% for css in component.css_dependencies %}
                                    <code class="dependency-file">{{ css }}</code>
                                    {% endfor %}
                                </div>
                                {% endif %}
                                {% if component.js_dependencies %}
                                <div class="dependency-group">
                                    <span class="dependency-label">JS:</span>
                                    {% for js in component.js_dependencies %}
                                    <code class="dependency-file">{{ js }}</code>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                            {% endif %}
                            
                            <!-- Code Example -->
                            <div class="code-example-section">
                                <h4 class="code-title">
                                    <i class="fas fa-code"></i>
                                    Usage Example
                                </h4>
                                <div class="code-container">
                                    <pre><code class="language-jinja2">{{ component.get_example_usage() }}</code></pre>
                                    <button class="copy-code-btn" 
                                            onclick="copyToClipboard('{{ component.get_example_usage()|e }}')"
                                            title="Copy to clipboard">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </article>
                    {% endfor %}
                </div>
                
                <!-- No Results Message -->
                <div class="no-results" id="no-results" style="display: none;">
                    <div class="no-results-content">
                        <i class="fas fa-search"></i>
                        <h3>No Components Found</h3>
                        <p>Try adjusting your search criteria or filters</p>
                        <button class="btn btn-primary" onclick="clearAllFilters()">
                            Clear All Filters
                        </button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Component Testing Modal -->
    <div class="modal" id="component-test-modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-vial"></i>
                    Component Tester
                </h3>
                <button class="modal-close" onclick="closeModal('component-test-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="test-container">
                    <!-- Component Configuration -->
                    <div class="test-config">
                        <h4>Configuration</h4>
                        <form id="component-test-form">
                            <div id="test-props-container">
                                <!-- Dynamic property inputs will be inserted here -->
                            </div>
                            <div class="test-actions">
                                <button type="button" class="btn btn-secondary" onclick="resetTestForm()">
                                    <i class="fas fa-undo"></i>
                                    Reset
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-play"></i>
                                    Test Component
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Component Preview -->
                    <div class="test-preview">
                        <h4>Preview</h4>
                        <div class="preview-container" id="component-preview">
                            <!-- Component will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- Generated Code -->
                    <div class="test-code">
                        <h4>Generated Code</h4>
                        <div class="code-container">
                            <pre><code class="language-jinja2" id="generated-code"></code></pre>
                            <button class="copy-code-btn" onclick="copyGeneratedCode()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Component Performance Report Modal -->
    <div class="modal" id="performance-report-modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-chart-line"></i>
                    Performance Report
                </h3>
                <button class="modal-close" onclick="closeModal('performance-report-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="performance-dashboard">
                    <!-- Performance metrics will be loaded here -->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="docs-loading">
    <div class="loading-spinner">
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
        <div class="spinner-ring"></div>
    </div>
    <p>Loading component documentation...</p>
</div>

<!-- Notification Toast -->
<div class="toast" id="docs-toast">
    <div class="toast-content">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Syntax highlighting (external CDN) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<!-- Component showcase logic -->
<script>
    // Component showcase functionality
    class ComponentShowcase {
        static init(options) {
            console.log('ðŸŽ¨ Component Showcase initialized', options);
            // Add your component showcase logic here
        }
    }
</script>
<script>
    // Initialize component showcase
    document.addEventListener('DOMContentLoaded', function() {
        ComponentShowcase.init({
            components: {{ components|tojson }},
            registry_url: "{{ url_for('component_registry_api') }}",
            test_url: "{{ url_for('component_test_api') }}"
        });
    });
</script>
{% endblock %}
